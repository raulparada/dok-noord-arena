<head>
    <script src="./tailwindv4.js"></script>
    <script src="./htmx2.0.4.min.js"></script>
    <meta name="htmx-config" content='{"selfRequestsOnly":false}'>
</head>

<body
    class="
    grid grid-cols-1
    content-center
    justify-center
    justify-items-center
    items-center
    bg-stone-100
    font-system-ui">
    <table class="table-auto w-3/4">
        <p class="text-xl font-bold">
            Matches
        </p>
        <tbody>
            
            
            <tr>
                <td class="px-1 font-bold text-gray-400">2025-04-01 20:00:00</td>
                <td class="px-1 text-right ">Adam ‚Ä¢ Maarten ‚Ä¢ Onur ‚Ä¢ Pablo OG ‚Ä¢ Raphael</td>
                <td class="px-3 text-center w-25 text-gray-500">&#9899; vs
                    &#9898;Ô∏è
                </td>
                <td class="px-1 text-left ">Karim ‚Ä¢ Miro ‚Ä¢ Sizwe ‚Ä¢ Tchi ‚Ä¢ Victor</td>
                
            </tr>
            
            <tr>
                <td class="px-1 font-bold text-gray-400">2025-03-25 20:30:00</td>
                <td class="px-1 text-right font-bold">Adam ‚Ä¢ Alex ‚Ä¢ Dobromil ‚Ä¢ Pablo OG ‚Ä¢ Wouter</td>
                <td class="px-3 text-center w-25 text-gray-500">&#128308 vs
                    &#9899;Ô∏è
                </td>
                <td class="px-1 text-left ">Adi ‚Ä¢ Baris ‚Ä¢ Karim ‚Ä¢ Renaud ‚Ä¢ Sandero</td>
                
                <td class="px-1 font-medium text-blue-600 dark:text-blue-500 hover:underline"> <a
                        href="https://app.myplay.com/app/game/67e332b42eab8abd1cb449c6/highlights">highlights</a></td>
                </td>
                
            </tr>
            
            <tr>
                <td class="px-1 font-bold text-gray-400">2025-03-25 20:30:00</td>
                <td class="px-1 text-right font-bold">Dmitro ‚Ä¢ Miro ‚Ä¢ Nima ‚Ä¢ Raphael ‚Ä¢ Sizwe</td>
                <td class="px-3 text-center w-25 text-gray-500">&#128994 vs
                    &#9898;Ô∏è
                </td>
                <td class="px-1 text-left ">Bram ‚Ä¢ Finnian ‚Ä¢ Giovanni ‚Ä¢ Johan ‚Ä¢ Tchi</td>
                
                <td class="px-1 font-medium text-blue-600 dark:text-blue-500 hover:underline"> <a
                        href="https://app.myplay.com/app/game/67e33ee0665c5bb7349201fd/highlights">highlights</a></td>
                </td>
                
            </tr>
            
            <tr>
                <td class="px-1 font-bold text-gray-400">2025-03-25 20:00:00</td>
                <td class="px-1 text-right font-bold">Adam ‚Ä¢ Alex ‚Ä¢ Dobromil ‚Ä¢ Pablo OG ‚Ä¢ Wouter</td>
                <td class="px-3 text-center w-25 text-gray-500">&#128308 vs
                    &#9898;Ô∏è
                </td>
                <td class="px-1 text-left ">Bram ‚Ä¢ Finnian ‚Ä¢ Giovanni ‚Ä¢ Johan ‚Ä¢ Tchi</td>
                
                <td class="px-1 font-medium text-blue-600 dark:text-blue-500 hover:underline"> <a
                        href="https://app.myplay.com/app/game/67e332b42eab8abd1cb449c6/highlights">highlights</a></td>
                </td>
                
            </tr>
            
            <tr>
                <td class="px-1 font-bold text-gray-400">2025-03-25 20:00:00</td>
                <td class="px-1 text-right ">Dmitro ‚Ä¢ Miro ‚Ä¢ Nima ‚Ä¢ Raphael ‚Ä¢ Sizwe</td>
                <td class="px-3 text-center w-25 text-gray-500">&#128994 vs
                    &#9899;Ô∏è
                </td>
                <td class="px-1 text-left font-bold">Adi ‚Ä¢ Baris ‚Ä¢ Karim ‚Ä¢ Renaud ‚Ä¢ Sandero</td>
                
                <td class="px-1 font-medium text-blue-600 dark:text-blue-500 hover:underline"> <a
                        href="https://app.myplay.com/app/game/67e33ee0665c5bb7349201fd/highlights">highlights</a></td>
                </td>
                
            </tr>
            
        </tbody>
    </table>
    <details
        class="grid grid-cols-1 content-center justify-center justify-items-center items-center group cursor-pointer"
        id="matchmaking">
        <summary class="text-blue-500 group-open:text-black">Start new...</summary>
        <form>
            <textarea
                placeholder="Tuesday DD/MM @20:00
1.‚Å† Player 1
2.‚Å† Player 2‚Å†
3.‚Å† Player 3
4.‚Å† Player 4‚Å†
5.‚Å† Player 5‚Å†
6.‚Å† Player 6‚Å†
7.‚Å† Player 7‚Å†
8.‚Å† Player 8‚Å†
9.‚Å† Player 9‚Å†
10.‚Å† Player 10"
                class="relative resize-none h-70 w-60 border-2 border-blue-500"
                name="data"
                hx-swap="delete"
                hx-target="#matchmaking"
                hx-confirm="Submit match?"
                hx-ext="dispatchjson"
                hx-post="http://localhost:7654/dispatches"
                data-event-type="matchmaking"
                data-redirect="true"></textarea>
        </form>
    </details>
    <br>

    
    <table>
        <p class="text-xl font-bold">
            Players
        </p>
        <thead>
            <tr>
                <th></th> <!-- name -->
                <th>‚õπÔ∏è‚Äç‚ôÇÔ∏è</th>
                <th>W</th>
                <th>L</th>
                <th>üèÜ</th>
                <th>‚≠êÔ∏è</th>
            </tr>
        </thead>
        <tbody>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Wouter</th>
                <td class="px-1">2</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Pablo OG</th>
                <td class="px-1">3</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Dobromil</th>
                <td class="px-1">2</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Alex</th>
                <td class="px-1">2</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Adam</th>
                <td class="px-1">3</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Sizwe</th>
                <td class="px-1">3</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Sandero</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Renaud</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Raphael</th>
                <td class="px-1">3</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Nima</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Miro</th>
                <td class="px-1">3</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Karim</th>
                <td class="px-1">3</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Dmitro</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Baris</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Adi</th>
                <td class="px-1">2</td>
                <td class="px-1">1</td>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Victor</th>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Tchi</th>
                <td class="px-1">3</td>
                <td class="px-1">0</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Sander</th>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Onur</th>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Maarten</th>
                <td class="px-1">1</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Luca</th>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Lars</th>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Johan</th>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Giovanni</th>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Finnian</th>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
            </tr>
            
            <tr>
                <th class="text-right px-2 font-semibold">
                    Bram</th>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
                <td class="px-1">2</td>
                <td class="px-1">0</td>
            </tr>
            
        </tbody>
    </table>
    <script>
        let CI_TOKEN
        fetch("ci_public_token")
            .then((res) => res.text())
            .then(text => CI_TOKEN = text.trim())
        // https://www.submitjson.com/blog/htmx-post-json
        htmx.defineExtension('dispatchjson', {
            onEvent: function (name, evt) {
                console.log("htmx evt", evt)
                if (name === "htmx:configRequest") {
                    evt.detail.headers = {
                        "Content-Type": "application/json", // not required yet correct.
                        "Accept": "application/vnd.github+json",
                        "X-GitHub-Api-Version": "2022-11-28",
                        "Authorization": `Bearer ${CI_TOKEN}`
                    }
                }
                if (name === "htmx:xhr:loadend") {
                    if (evt.detail.elt.dataset.redirect === "true") {
                        // Redirect to repo actions overview filtering to event type.
                        window.location = `https://github.com/raulparada/dok-noord-arena/actions?query=event%3A${evt.detail.elt.dataset.eventType}`
                    }
                }
            },
            encodeParameters: function (xhr, parameters, elt) {
                console.log("encode", xhr, parameters, elt)
                xhr.overrideMimeType('text/json')
                const body = {
                    // https://docs.github.com/en/actions/writing-workflows/choosing-when-your-workflow-runs/events-that-trigger-workflows#repository_dispatch
                    // https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#create-a-repository-dispatch-event
                    client_payload: parameters,
                    event_type: elt.dataset.eventType,
                }
                return (JSON.stringify(body))
            }
        })
    </script>
</body>